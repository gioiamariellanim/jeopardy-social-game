<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeopardy! Fall Social Edition</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Tone.js for background music synthesis --><script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <!-- Configure Tailwind to use Inter font and custom colors --><script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'jeopardy-blue': '#060087',
                        'jeopardy-yellow': '#ffcc00',
                        'jeopardy-red': '#cc0000',
                        'jeopardy-light-blue': '#3333ff',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom font import for better Jeopardy feel, matching the bold/stylized look */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700&display=swap');
        .jeopardy-title-font {
            font-family: 'Roboto Slab', serif;
        }

        /* Gradient background inspired by the provided screenshots (space/retro look) */
        .jeopardy-background {
            background: linear-gradient(180deg, #1c004b 0%, #3e017a 30%, #ff0066 70%, #ff6600 100%);
            position: relative;
            overflow: hidden;
        }

        /* Starry effect for the background */
        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            /* Placeholder for a complex starfield effect */
            background-image: radial-gradient(white 1px, transparent 1px), radial-gradient(white 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.3;
        }

        .clue-cell {
            transition: background-color 0.3s, color 0.3s, transform 0.2s;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            border: 4px solid #000; /* Darker border for contrast */
        }
        .clue-cell:hover:not(.disabled) {
            transform: scale(1.03);
            box-shadow: 0 8px 15px rgba(255, 204, 0, 0.6);
        }
        .disabled {
            background-color: #1a1a1a !important; /* Very dark grey when disabled */
            color: #444444 !important; /* Muted text when disabled */
            cursor: default;
            pointer-events: none;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.8);
        }
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .modal-content {
            animation: fadeIn 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bounce effect */
        }
    </style>
</head>
<body class="jeopardy-background min-h-screen p-4 sm:p-8 font-sans">
    <div class="stars"></div>

    <!-- === 1. Scoreboard (Always visible on Board View) === --><div id="scoreboard" class="max-w-7xl mx-auto mb-6 bg-gray-800/80 p-4 rounded-xl shadow-2xl border-2 border-gray-700 hidden">
        <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4 text-center">
            
            <!-- Team 1 --><div class="flex-1 w-full sm:w-auto p-2 bg-gray-900/50 rounded-lg">
                <h3 class="text-xl font-bold text-white mb-2">Team 1 Score: $<span id="score-1">0</span></h3>
                <div class="flex justify-center space-x-2">
                    <button onclick="updateScore(1, currentClue ? currentClue.value : 200)" class="px-4 py-2 bg-green-500 rounded-lg text-white font-bold hover:bg-green-600 transition duration-150 text-sm sm:text-base">+ Correct</button>
                    <button onclick="updateScore(1, -(currentClue ? currentClue.value : 200))" class="px-4 py-2 bg-jeopardy-red rounded-lg text-white font-bold hover:bg-red-700 transition duration-150 text-sm sm:text-base">- Incorrect</button>
                </div>
            </div>

            <!-- New Game/Reset/Mute Controls --><div class="flex flex-col items-center space-y-2">
                <button onclick="resetGameConfirmation()" class="px-6 py-3 bg-jeopardy-yellow text-jeopardy-blue font-bold rounded-lg text-base sm:text-lg hover:bg-yellow-300 transition duration-150 shadow-md">
                    Reset Game
                </button>
                <button id="mute-button" onclick="toggleMute()" class="px-4 py-1 bg-gray-500 text-white text-xs rounded-full hover:bg-gray-600 transition duration-150">
                    Music: ON
                </button>
            </div>
            
            <!-- Team 2 --><div class="flex-1 w-full sm:w-auto p-2 bg-gray-900/50 rounded-lg">
                <h3 class="text-xl font-bold text-white mb-2">Team 2 Score: $<span id="score-2">0</span></h3>
                <div class="flex justify-center space-x-2">
                    <button onclick="updateScore(2, currentClue ? currentClue.value : 200)" class="px-4 py-2 bg-green-500 rounded-lg text-white font-bold hover:bg-green-600 transition duration-150 text-sm sm:text-base">+ Correct</button>
                    <button onclick="updateScore(2, -(currentClue ? currentClue.value : 200))" class="px-4 py-2 bg-jeopardy-red rounded-lg text-white font-bold hover:bg-red-700 transition duration-150 text-sm sm:text-base">- Incorrect</button>
                </div>
            </div>
        </div>
        <p id="score-info" class="text-xs text-gray-400 mt-2 text-center">Score buttons use the value of the currently open clue.</p>
    </div>

    <!-- === 2. Title View (Landing Page) === --><div id="title-view" class="flex flex-col items-center justify-center min-h-[80vh] text-center">
        <h1 class="text-6xl sm:text-9xl font-bold text-white jeopardy-title-font tracking-widest leading-none" style="text-shadow: 0 0 10px rgba(255, 204, 0, 0.8), 0 0 20px rgba(255, 0, 102, 0.6);">
            JEOPARDY!
        </h1>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-jeopardy-yellow jeopardy-title-font mt-4 mb-12 uppercase tracking-wider" style="text-shadow: 0 0 5px #000;">
            Fall Social Edition
        </h2>
        <button onclick="setView('board')" class="px-10 py-5 bg-jeopardy-yellow text-jeopardy-blue font-extrabold rounded-xl text-2xl sm:text-3xl hover:bg-yellow-300 transition duration-300 shadow-xl transform hover:scale-105">
            Start Game
        </button>
    </div>

    <!-- === 3. Board View (Main Game Grid) === --><div id="board-view" class="max-w-7xl mx-auto hidden">
        <div id="jeopardy-board" class="grid grid-cols-6 gap-2 sm:gap-4">
            <!-- The board will be populated by JavaScript --></div>
    </div>


    <!-- === 4. Modal for Clue and Answer Display === --><div id="clue-modal" class="modal-backdrop hidden">
        <div class="modal-content bg-jeopardy-blue text-white rounded-xl p-8 max-w-3xl w-11/12 shadow-2xl border-4 border-jeopardy-yellow transform">
            <h2 id="modal-category" class="text-center text-xl sm:text-3xl font-bold jeopardy-title-font mb-2 text-jeopardy-yellow uppercase"></h2>
            <p id="modal-clue-value" class="text-center text-lg sm:text-xl font-bold mb-6 text-white"></p>

            <!-- Clue View --><div id="clue-view">
                <p id="modal-clue" class="text-2xl sm:text-4xl text-center font-medium leading-snug mb-8" style="text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);"></p>
                <button onclick="revealAnswer()" class="w-full py-4 bg-jeopardy-light-blue text-white font-bold rounded-lg text-xl sm:text-2xl hover:bg-blue-500 transition duration-150 shadow-lg border-2 border-white">
                    Reveal The Answer
                </button>
            </div>

            <!-- Answer View --><div id="answer-view" class="hidden">
                <p class="text-xl sm:text-2xl text-center mb-4 text-gray-300">The Answer is...</p>
                <p id="modal-answer" class="text-3xl sm:text-5xl text-center font-extrabold text-jeopardy-yellow mb-8 jeopardy-title-font" style="text-shadow: 0 0 10px rgba(255, 204, 0, 0.8);"></p>
                <button onclick="closeModal()" class="w-full py-3 bg-green-600 text-white font-bold rounded-lg text-lg sm:text-xl hover:bg-green-700 transition duration-150 shadow-md">
                    Return to Board
                </button>
            </div>

            <!-- Reset Confirmation View (New) --><div id="reset-confirmation-view" class="hidden text-center">
                <h2 class="text-3xl font-bold jeopardy-title-font text-jeopardy-yellow mb-4">RESET GAME?</h2>
                <p class="text-xl font-medium text-white mb-8">Are you sure you want to clear all scores and played clues?</p>
                <div class="flex justify-center space-x-4">
                    <button onclick="performReset(true)" class="px-8 py-4 bg-red-600 text-white font-bold rounded-lg text-2xl hover:bg-red-700 transition duration-150 shadow-md">
                        Yes, Reset
                    </button>
                    <button onclick="performReset(false)" class="px-8 py-4 bg-gray-500 text-white font-bold rounded-lg text-2xl hover:bg-gray-600 transition duration-150 shadow-md">
                        No, Cancel
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- TONE.JS MUSIC SETUP ---
        let clueMusicLoop = null;
        let isMuted = false;
        const synth = new Tone.Synth({
            oscillator: { type: "sine" },
            envelope: {
                attack: 0.005,
                decay: 0.1,
                sustain: 0.3,
                release: 1
            }
        }).toDestination();

        // The classic Jeopardy clue theme melody (simplified)
        const melody = [
            { note: "G3", duration: "4n" },
            { note: "C4", duration: "4n" },
            { note: "G3", duration: "4n" },
            { note: "C4", duration: "4n" },
            { note: "F3", duration: "4n" },
            { note: "Bb3", duration: "4n" },
            { note: "F3", duration: "4n" },
            { note: "Bb3", duration: "4n" }
        ];

        function startMusic() {
            // Stop any existing music first
            stopMusic();

            if (isMuted) return;
            
            // Start the Tone.js audio context if it's suspended (required by browsers)
            if (Tone.context.state !== 'running') {
                Tone.start();
            }

            // Create a loop
            clueMusicLoop = new Tone.Sequence((time, noteInfo) => {
                synth.triggerAttackRelease(noteInfo.note, noteInfo.duration, time);
            }, melody, "1n"); // Repeats every 1 whole note

            clueMusicLoop.loop = true;
            clueMusicLoop.start(0);
            Tone.Transport.bpm.value = 80;
            Tone.Transport.start();
        }

        function stopMusic() {
            if (clueMusicLoop) {
                clueMusicLoop.stop(0);
                clueMusicLoop.dispose();
                clueMusicLoop = null;
            }
            // Tone.Transport.stop(); // Keep transport running for faster restarts
        }

        function toggleMute() {
            isMuted = !isMuted;
            const button = document.getElementById('mute-button');
            if (isMuted) {
                button.textContent = "Music: OFF";
                button.classList.replace('bg-gray-500', 'bg-red-500');
                stopMusic();
            } else {
                button.textContent = "Music: ON";
                button.classList.replace('bg-red-500', 'bg-gray-500');
                // If a clue is currently open, restart music
                if (currentView === 'clue_modal') {
                    startMusic();
                }
            }
        }

        // --- GAME DATA AND STATE ---
        const gameData = [
            {
                category: "Vibe Check: Meme History",
                clues: [
                    { value: 200, clue: "The most famous version of this meme features a dog sitting calmly in a room engulfed in flames, saying 'This is fine.'", answer: "What is the 'This is Fine' Dog?", id: 'c1-200' },
                    { value: 400, clue: "This short, looping video app, popular in the mid-2010s, gave us six-second legends like 'Look at all those chickens.'", answer: "What is Vine?", id: 'c1-400' },
                    { value: 600, clue: "This meme, often used to express confusion or a deep philosophical inquiry, features a man blinking in disbelief.", answer: "What is the Disappointed/Blinking White Guy?", id: 'c1-600' },
                    { value: 800, clue: "The song 'All Star' by Smash Mouth became an internet fixture largely due to its use in the opening credits of this 2001 animated movie.", answer: "What is *Shrek*?", id: 'c1-800' },
                    { value: 1000, clue: "The 'distracted boyfriend' stock photo meme actually features a woman identified by this profession, typically shown holding a clipboard.", answer: "What is a photographer?", id: 'c1-1000' }
                ]
            },
            {
                category: "Adulting is a Scam",
                clues: [
                    { value: 200, clue: "The phrase 'I need to talk to you about your ___' is often associated with the dreaded performance review at work.", answer: "What is your TPS report? (From *Office Space*)", id: 'c2-200' },
                    { value: 400, clue: "This is the common, highly processed yellow fruit found on most grocery store shelves, which is notoriously hard to keep fresh.", answer: "What is a banana?", id: 'c2-400' },
                    { value: 600, clue: "The concept of 'almond mom' refers to a parent who excessively worries about and restricts their child's consumption of this nutritional component.", answer: "What is food/calories/weight?", id: 'c2-600' },
                    { value: 800, clue: "This widely mocked corporate jargon refers to a quick, casual conversation, usually over video conferencing.", answer: "What is a 'quick sync' or a 'touch base'?", id: 'c2-800' },
                    { value: 1000, clue: "The tax forms most frequently used by individuals for basic income tax reporting are numbered 1040, W-2, and this form, used for interest and dividend income.", answer: "What is a 1099 form?", id: 'c2-1000' }
                ]
            },
            {
                category: "Streaming & Chill",
                clues: [
                    { value: 200, clue: "This Netflix coming-of-age comedy focuses on a group of high schoolers who start a sex therapy business.", answer: "What is *Sex Education*?", id: 'c3-200' },
                    { value: 400, clue: "This HBO show about four friends in New York City became famous for its sharp dialogue and commentary on modern relationships and high society.", answer: "What is *Sex and the City*?", id: 'c3-400' },
                    { value: 600, clue: "This South Korean survival drama became Netflix's most-watched series debut, with contestants playing deadly children's games.", answer: "What is *Squid Game*?", id: 'c3-600' },
                    { value: 800, clue: "The final season of this Canadian sitcom featured a farewell tour of the Rose family's titular small town.", answer: "What is *Schitt's Creek*?", id: 'c3-800' },
                    { value: 1000, clue: "This reality dating show, known for its iconic neon signs and 'recoupling' ceremonies, is set primarily in a villa on an island.", answer: "What is *Love Island*?", id: 'c3-1000' }
                ]
            },
            {
                category: "The Algorithm Knows Me",
                clues: [
                    { value: 200, clue: "This social media platform is primarily known for short-form video content and viral dance challenges.", answer: "What is TikTok?", id: 'c4-200' },
                    { value: 400, clue: "This term describes content, usually on YouTube or Twitch, where a creator slowly opens and shows off items from a package or shopping spree.", answer: "What is an unboxing video?", id: 'c4-400' },
                    { value: 600, clue: "Known by the username 'MrBeast,' this creator holds the title for the most subscribers on YouTube.", answer: "Who is Jimmy Donaldson?", id: 'c4-600' },
                    { value: 800, clue: "This popular gaming communication platform is structured around 'servers' and 'channels.'", answer: "What is Discord?", id: 'c4-800' },
                    { value: 1000, clue: "This controversial 2019 music festival, promoted by social media influencers, failed spectacularly on a remote Caribbean island.", answer: "What is Fyre Festival?", id: 'c4-1000' }
                ]
            },
            {
                category: "$90$s Kid Nostalgia",
                clues: [
                    { value: 200, clue: "This gooey, green substance was Nickelodeon's signature trademark and often dumped on celebrities.", answer: "What is Gak (or Slime)?", id: 'c5-200' },
                    { value: 400, clue: "This handheld virtual pet required feeding, cleaning, and attention, or it would 'die.'", answer: "What is a Tamagotchi?", id: 'c5-400' },
                    { value: 600, clue: "This platform was the main way Millennials communicated online after school before Facebook or Instagram existed, often using custom layouts.", answer: "What is MySpace?", id: 'c5-600' },
                    { value: 800, clue: "The popular 90s handheld console released by Nintendo could only display four shades of gray/green on its screen.", answer: "What is the Game Boy?", id: 'c5-800' },
                    { value: 1000, clue: "This animated Disney movie features a princess who saves her country from the Huns by disguising herself as a male soldier named Ping.", answer: "What is *Mulan*?", id: 'c5-1000' }
                ]
            },
            {
                category: "Too Online",
                clues: [
                    { value: 200, clue: "This common abbreviation means 'in my humble opinion' or 'in my honest opinion.'", answer: "What is IMHO?", id: 'c6-200' },
                    { value: 400, clue: "When someone is criticized online for a past action, they are often said to have been subjected to this type of 'culture.'", answer: "What is cancel culture?", id: 'c6-400' },
                    { value: 600, clue: "This term, originating on Twitter, is used to describe a short, frantic burst of public obsession or discussion about a specific topic.", answer: "What is a discourse or a micro-discourse?", id: 'c6-600' },
                    { value: 800, clue: "This term is used to describe a long, continuous series of posts, often explaining a complex topic or telling a detailed story.", answer: "What is a thread?", id: 'c6-800' },
                    { value: 1000, clue: "The classic video game cheat code Up, Up, Down, Down, Left, Right, Left, Right, B, A, Start is known by this name.", answer: "What is the Konami Code?", id: 'c6-1000' }
                ]
            }
        ];

        // --- GAME STATE AND SCORING ---
        let currentView = 'title'; // 'title', 'board', 'modal', or 'reset_confirm'
        let currentClue = null;
        let scores = {
            '1': 0,
            '2': 0
        };

        // --- CORE VIEW MANAGEMENT ---
        function hideAllViews() {
            document.getElementById('title-view').classList.add('hidden');
            document.getElementById('board-view').classList.add('hidden');
            document.getElementById('scoreboard').classList.add('hidden');
            document.getElementById('clue-modal').classList.add('hidden');
            document.getElementById('clue-view').classList.add('hidden'); // Hide default clue view elements
            document.getElementById('answer-view').classList.add('hidden'); // Hide default answer view elements
            document.getElementById('reset-confirmation-view').classList.add('hidden'); // Hide reset confirmation elements
        }

        function setView(view) {
            hideAllViews(); // Hide everything first
            currentView = view;

            if (view === 'title') {
                document.getElementById('title-view').classList.remove('hidden');
                stopMusic(); // Stop music on title screen
            } else if (view === 'board') {
                document.getElementById('board-view').classList.remove('hidden');
                document.getElementById('scoreboard').classList.remove('hidden');
                stopMusic(); // Stop music on board view
                renderBoard(); // Re-render to reflect disabled clues
            } else if (view === 'clue_modal') { // Renamed from 'modal' to be more specific
                document.getElementById('clue-modal').classList.remove('hidden');
                document.getElementById('clue-view').classList.remove('hidden'); // Ensure clue view is shown
                startMusic(); // START music when clue is displayed
            } else if (view === 'answer_modal') {
                document.getElementById('clue-modal').classList.remove('hidden');
                document.getElementById('answer-view').classList.remove('hidden'); // Ensure answer view is shown
                stopMusic(); // STOP music when answer is revealed
            } else if (view === 'reset_confirm') {
                document.getElementById('clue-modal').classList.remove('hidden');
                document.getElementById('reset-confirmation-view').classList.remove('hidden');
                stopMusic(); // Stop music during confirmation
            }
        }

        // --- SCORING FUNCTIONS ---
        function updateScore(team, amount) {
            scores[team] += amount;
            document.getElementById(`score-${team}`).textContent = scores[team];
        }

        function renderScores() {
            document.getElementById('score-1').textContent = scores['1'];
            document.getElementById('score-2').textContent = scores['2'];
        }

        // Function to trigger the reset confirmation modal
        function resetGameConfirmation() {
            setView('reset_confirm');
        }

        function performReset(confirmed) {
            if (confirmed) {
                // Clear scores
                scores = { '1': 0, '2': 0 };
                renderScores();

                // Clear all clue states in localStorage
                gameData.forEach(category => {
                    category.clues.forEach(clue => {
                        localStorage.removeItem(clue.id);
                    });
                });
            }
            // In either case (confirmed or canceled), return to the board view
            setView('board');
        }

        // --- BOARD RENDERING AND CLUE LOGIC ---

        function renderBoard() {
            const board = document.getElementById('jeopardy-board');
            board.innerHTML = '';

            // 1. Render Category Headers (first row)
            gameData.forEach(category => {
                const header = document.createElement('div');
                header.className = 'flex items-center justify-center p-2 sm:p-3 text-center text-white bg-jeopardy-blue font-bold text-base sm:text-lg rounded-lg jeopardy-title-font uppercase tracking-wider h-24 sm:h-32 shadow-xl border-4 border-jeopardy-yellow leading-tight';
                header.textContent = category.category;
                board.appendChild(header);
            });

            // 2. Render Clue Cells (rows 2-6)
            const values = [200, 400, 600, 800, 1000];
            values.forEach(value => {
                gameData.forEach((category, catIndex) => {
                    const clue = category.clues.find(c => c.value === value);
                    const cell = document.createElement('div');
                    
                    const isDisabled = localStorage.getItem(clue.id) === 'disabled';

                    let classList = 'clue-cell flex items-center justify-center h-20 sm:h-28 text-white font-extrabold text-3xl sm:text-5xl rounded-lg bg-jeopardy-blue transition duration-300';

                    if (isDisabled) {
                        classList += ' disabled';
                        cell.textContent = ''; // Clear text if disabled
                    } else {
                        cell.textContent = `$${value}`;
                        cell.addEventListener('click', () => openClue(clue)); // No need to pass cellElement directly now
                    }

                    cell.className = classList;
                    board.appendChild(cell);
                });
            });
        }

        // Function to open the clue modal
        function openClue(clue) {
            currentClue = clue;
            
            document.getElementById('modal-category').textContent = gameData.find(c => c.clues.includes(clue)).category;
            document.getElementById('modal-clue-value').textContent = `$${clue.value}`;
            document.getElementById('modal-clue').innerHTML = clue.clue;
            document.getElementById('modal-answer').textContent = clue.answer;

            setView('clue_modal'); // Show the clue first and start music
        }

        // Function to reveal the answer in the modal
        function revealAnswer() {
            // Mark the clue as disabled/used in localStorage before switching view
            if (currentClue) {
                localStorage.setItem(currentClue.id, 'disabled');
            }
            setView('answer_modal'); // Show the answer view and stop music
        }

        // Function to close the modal and update the board
        function closeModal() {
            currentClue = null;
            setView('board'); // Return to the board view and stop music
        }

        // Initialize the app
        window.onload = () => {
            renderScores();
            setView('title'); // Start on the title view
        };
    </script>
</body>
</html>
