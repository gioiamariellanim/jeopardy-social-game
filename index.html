<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeopardy! Fall Social Edition</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Tone.js for background music synthesis --><script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <!-- Configure Tailwind to use Inter font and custom colors --><script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'jeopardy-blue': '#060087',
                        'jeopardy-yellow': '#ffcc00',
                        'jeopardy-red': '#cc0000',
                        'jeopardy-light-blue': '#3333ff',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom font import for better Jeopardy feel, matching the bold/stylized look */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700&display=swap');
        .jeopardy-title-font {
            font-family: 'Roboto Slab', serif;
        }

        /* Gradient background inspired by the provided screenshots (space/retro look) */
        .jeopardy-background {
            background: linear-gradient(180deg, #1c004b 0%, #3e017a 30%, #ff0066 70%, #ff6600 100%);
            position: relative;
            overflow-y: auto; /* Allow vertical scrolling on the background */
        }

        /* Set HTML and Body height to ensure they cover the full viewport */
        html, body {
            height: 100%;
        }
        
        .stars {
            position: fixed; /* Changed to fixed so stars stay put while content scrolls */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            /* Placeholder for a complex starfield effect */
            background-image: radial-gradient(white 1px, transparent 1px), radial-gradient(white 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.3;
            z-index: -1; /* Ensure stars are behind everything */
        }

        .clue-cell {
            transition: background-color 0.3s, color 0.3s, transform 0.2s;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            border: 4px solid #000; /* Darker border for contrast */
        }
        .clue-cell:hover:not(.disabled) {
            transform: scale(1.03);
            box-shadow: 0 8px 15px rgba(255, 204, 0, 0.6);
        }
        .disabled {
            background-color: #1a1a1a !important; /* Very dark grey when disabled */
            color: #444444 !important; /* Muted text when disabled */
            cursor: default;
            pointer-events: none;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.8);
        }
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .modal-content {
            animation: fadeIn 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* Bounce effect */
        }
    </style>
</head>
<body class="jeopardy-background p-4 sm:p-8 font-sans">
    <div class="stars"></div>

    <!-- === 1. Scoreboard (Always visible on Board View) === --><div id="scoreboard" class="max-w-7xl mx-auto mb-6 bg-gray-800/80 p-4 rounded-xl shadow-2xl border-2 border-gray-700 hidden">
        <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4 text-center">
            
            <!-- Team 1 --><div class="flex-1 w-full sm:w-auto p-2 bg-gray-900/50 rounded-lg">
                <h3 class="text-xl font-bold text-white mb-2">Team 1 Score: $<span id="score-1">0</span></h3>
                <div class="flex justify-center space-x-2">
                    <button onclick="updateScore(1, currentClue ? currentClue.value : 200)" class="px-4 py-2 bg-green-500 rounded-lg text-white font-bold hover:bg-green-600 transition duration-150 text-sm sm:text-base">+ Correct</button>
                    <button onclick="updateScore(1, -(currentClue ? currentClue.value : 200))" class="px-4 py-2 bg-jeopardy-red rounded-lg text-white font-bold hover:bg-red-700 transition duration-150 text-sm sm:text-base">- Incorrect</button>
                </div>
            </div>

            <!-- New Game/Reset/Mute Controls --><div class="flex flex-col items-center space-y-2">
                <button onclick="resetGameConfirmation()" class="px-6 py-3 bg-jeopardy-yellow text-jeopardy-blue font-bold rounded-lg text-base sm:text-lg hover:bg-yellow-300 transition duration-150 shadow-md">
                    Reset Game
                </button>
                <button id="mute-button" onclick="toggleMute()" class="px-4 py-1 bg-gray-500 text-white text-xs rounded-full hover:bg-gray-600 transition duration-150">
                    Music: ON
                </button>
            </div>
            
            <!-- Team 2 --><div class="flex-1 w-full sm:w-auto p-2 bg-gray-900/50 rounded-lg">
                <h3 class="text-xl font-bold text-white mb-2">Team 2 Score: $<span id="score-2">0</span></h3>
                <div class="flex justify-center space-x-2">
                    <button onclick="updateScore(2, currentClue ? currentClue.value : 200)" class="px-4 py-2 bg-green-500 rounded-lg text-white font-bold hover:bg-green-600 transition duration-150 text-sm sm:text-base">+ Correct</button>
                    <button onclick="updateScore(2, -(currentClue ? currentClue.value : 200))" class="px-4 py-2 bg-jeopardy-red rounded-lg text-white font-bold hover:bg-red-700 transition duration-150 text-sm sm:text-base">- Incorrect</button>
                </div>
            </div>
        </div>
        <p id="score-info" class="text-xs text-gray-400 mt-2 text-center">Score buttons use the value of the currently open clue.</p>
    </div>

    <!-- === 2. Title View (Landing Page) === --><div id="title-view" class="flex flex-col items-center justify-center min-h-[calc(100vh-64px)] text-center">
        <h1 class="text-6xl sm:text-9xl font-bold text-white jeopardy-title-font tracking-widest leading-none" style="text-shadow: 0 0 10px rgba(255, 204, 0, 0.8), 0 0 20px rgba(255, 0, 102, 0.6);">
            JEOPARDY!
        </h1>
        <h2 class="text-2xl sm:text-4xl font-extrabold text-jeopardy-yellow jeopardy-title-font mt-4 mb-12 uppercase tracking-wider" style="text-shadow: 0 0 5px #000;">
            Fall Social Edition
        </h2>
        <button onclick="setView('board')" class="px-10 py-5 bg-jeopardy-yellow text-jeopardy-blue font-extrabold rounded-xl text-2xl sm:text-3xl hover:bg-yellow-300 transition duration-300 shadow-xl transform hover:scale-105">
            Start Game
        </button>
    </div>

    <!-- === 3. Board View (Main Game Grid) === --><div id="board-view" class="max-w-7xl mx-auto hidden">
        <div id="jeopardy-board" class="grid grid-cols-6 gap-2 sm:gap-4">
            <!-- The board will be populated by JavaScript --></div>
    </div>


    <!-- === 4. Modal for Clue and Answer Display === --><div id="clue-modal" class="modal-backdrop hidden">
        <div class="modal-content bg-jeopardy-blue text-white rounded-xl p-8 max-w-3xl w-11/12 shadow-2xl border-4 border-jeopardy-yellow transform">
            <h2 id="modal-category" class="text-center text-xl sm:text-3xl font-bold jeopardy-title-font mb-2 text-jeopardy-yellow uppercase"></h2>
            <p id="modal-clue-value" class="text-center text-lg sm:text-xl font-bold mb-6 text-white"></p>

            <!-- Clue View --><div id="clue-view">
                <p id="modal-clue" class="text-2xl sm:text-4xl text-center font-medium leading-snug mb-8" style="text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);"></p>
                <button onclick="revealAnswer()" class="w-full py-4 bg-jeopardy-light-blue text-white font-bold rounded-lg text-xl sm:text-2xl hover:bg-blue-500 transition duration-150 shadow-lg border-2 border-white">
                    Reveal The Answer
                </button>
            </div>

            <!-- Answer View --><div id="answer-view" class="hidden">
                <p class="text-xl sm:text-2xl text-center mb-4 text-gray-300">The Answer is...</p>
                <p id="modal-answer" class="text-3xl sm:text-5xl text-center font-extrabold text-jeopardy-yellow mb-8 jeopardy-title-font" style="text-shadow: 0 0 10px rgba(255, 204, 0, 0.8);"></p>
                <button onclick="closeModal()" class="w-full py-3 bg-green-600 text-white font-bold rounded-lg text-lg sm:text-xl hover:bg-green-700 transition duration-150 shadow-md">
                    Return to Board
                </button>
            </div>

            <!-- Reset Confirmation View (New) --><div id="reset-confirmation-view" class="hidden text-center">
                <h2 class="text-3xl font-bold jeopardy-title-font text-jeopardy-yellow mb-4">RESET GAME?</h2>
                <p class="text-xl font-medium text-white mb-8">Are you sure you want to clear all scores and played clues?</p>
                <div class="flex justify-center space-x-4">
                    <button onclick="performReset(true)" class="px-8 py-4 bg-red-600 text-white font-bold rounded-lg text-2xl hover:bg-red-700 transition duration-150 shadow-md">
                        Yes, Reset
                    </button>
                    <button onclick="performReset(false)" class="px-8 py-4 bg-gray-500 text-white font-bold rounded-lg text-2xl hover:bg-gray-600 transition duration-150 shadow-md">
                        No, Cancel
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- TONE.JS MUSIC SETUP ---
        let clueMusicLoop = null;
        let isMuted = false;
        const synth = new Tone.Synth({
            oscillator: { type: "sine" },
            envelope: {
                attack: 0.005,
                decay: 0.1,
                sustain: 0.3,
                release: 1
            }
        }).toDestination();

        // The classic Jeopardy clue theme melody (simplified)
        const melody = [
            { note: "G3", duration: "4n" },
            { note: "C4", duration: "4n" },
            { note: "G3", duration: "4n" },
            { note: "C4", duration: "4n" },
            { note: "F3", duration: "4n" },
            { note: "Bb3", duration: "4n" },
            { note: "F3", duration: "4n" },
            { note: "Bb3", duration: "4n" }
        ];

        function startMusic() {
            // Stop any existing music first
            stopMusic();

            if (isMuted) return;
            
            // Start the Tone.js audio context if it's suspended (required by browsers)
            if (Tone.context.state !== 'running') {
                Tone.start();
            }

            // Create a loop
            clueMusicLoop = new Tone.Sequence((time, noteInfo) => {
                synth.triggerAttackRelease(noteInfo.note, noteInfo.duration, time);
            }, melody, "1n"); // Repeats every 1 whole note

            clueMusicLoop.loop = true;
            clueMusicLoop.start(0);
            Tone.Transport.bpm.value = 80;
            Tone.Transport.start();
        }

        function stopMusic() {
            if (clueMusicLoop) {
                clueMusicLoop.stop(0);
                clueMusicLoop.dispose();
                clueMusicLoop = null;
            }
            // Tone.Transport.stop(); // Keep transport running for faster restarts
        }

        function toggleMute() {
            isMuted = !isMuted;
            const button = document.getElementById('mute-button');
            if (isMuted) {
                button.textContent = "Music: OFF";
                button.classList.replace('bg-gray-500', 'bg-red-500');
                stopMusic();
            } else {
                button.textContent = "Music: ON";
                button.classList.replace('bg-red-500', 'bg-gray-500');
                // If a clue is currently open, restart music
                if (currentView === 'clue_modal') {
                    startMusic();
                }
            }
        }

        // --- GAME DATA AND STATE (ALL POP CULTURE / MEME VERSION) ---
        const gameData = [
            {
                category: "Blink 182-000s",
                clues: [
                    { value: 200, clue: "This reality star's catchphrase, 'That's hot,' became the defining phrase of the mid-2000s.", answer: "Who is Paris Hilton?", id: 'c1-200' },
                    { value: 400, clue: "The highly addictive flash game where you stack blocks to form horizontal lines.", answer: "What is Tetris?", id: 'c1-400' },
                    { value: 600, clue: "The specific year that the first iPhone was released, changing Millennial cell phone use forever.", answer: "What is 2007?", id: 'c1-600' },
                    { value: 800, clue: "The legendary, slightly glitchy video platform that allowed you to legally or illegally watch music videos in high school.", answer: "What is YouTube?", id: 'c1-800' },
                    { value: 1000, clue: "The specific 2007 Britney Spears song whose video featured a legendary dance break in a circus tent.", answer: "What is 'Gimme More'?", id: 'c1-1000' }
                ]
            },
            {
                category: "The Canadian Content Law",
                clues: [
                    { value: 200, clue: "The iconic Canadian singer known as 'The 6ix God.'", answer: "Who is Drake?", id: 'c2-200' },
                    { value: 400, clue: "The hilarious phrase often used to describe Canadian politeness in a passive-aggressive way.", answer: "What is 'Sorry, eh?'", id: 'c2-400' },
                    { value: 600, clue: "The two main ingredients in a classic Canadian 'Nanaimo Bar.'", answer: "What are chocolate and custard (or vanilla buttercream)?", id: 'c2-600' },
                    { value: 800, clue: "The specific character from *Schitt's Creek* known for their unusual wardrobe and use of the phrase 'A little bit Alexis.'", answer: "Who is Alexis Rose?", id: 'c2-800' },
                    { value: 1000, clue: "The Canadian-American star who launched the meme of putting a tiny picture of yourself in the corner of a video, often related to music reactions.", answer: "Who is Anthony Fantano (The Needle Drop)?", id: 'c2-1000' }
                ]
            },
            {
                category: "Cringe Culture is Dead",
                clues: [
                    { value: 200, clue: "The common internet activity that involves watching and rating strangers performing songs.", answer: "What is TikTok?", id: 'c3-200' },
                    { value: 400, clue: "The highly relatable meme of a man looking back at another woman, while his girlfriend stares in disapproval.", answer: "What is the 'Distracted Boyfriend' meme?", id: 'c3-400' },
                    { value: 600, clue: "The meme format that uses a series of photos of a character slowly realizing an unpleasant truth.", answer: "What is 'Expanding Brain' or 'Woke Bae'?", id: 'c3-600' },
                    { value: 800, clue: "The early 2010s trend of planking in public places, causing confusion and minor injuries.", answer: "What is 'Planking'?", id: 'c3-800' },
                    { value: 1000, clue: "The specific format of using a yellow, animated character to deliver shocking, often poorly written jokes in the early 2010s.", answer: "What are Minion memes?", id: 'c3-1000' }
                ]
            },
            {
                category: "It's the Nostalgia for Me",
                clues: [
                    { value: 200, clue: "The main handheld gaming device that popularized the use of interchangeable cartridges.", answer: "What is the Game Boy?", id: 'c4-200' },
                    { value: 400, clue: "The sugary, brightly colored cereal that notoriously turned the milk blue.", answer: "What is Crunch Berries (Cap'n Crunch)?", id: 'c4-400' },
                    { value: 600, clue: "The iconic 90s toy that changed colours depending on its temperature.", answer: "What is a mood ring?", id: 'c4-600' },
                    { value: 800, clue: "The highly popular 90s cartoon about a group of talking animals solving mysteries in a van.", answer: "What is *Scooby-Doo*?", id: 'c4-800' },
                    { value: 1000, clue: "The specific video game console that introduced the concept of analog sticks and rumble feedback.", answer: "What is the Nintendo 64 (N64)?", id: 'c4-1000' }
                ]
            },
            {
                category: "The Streaming Gods",
                clues: [
                    { value: 200, clue: "The Netflix show that revived the careers of Winona Ryder and brought back 80s nostalgia.", answer: "What is *Stranger Things*?", id: 'c5-200' },
                    { value: 400, clue: "The HBO series that follows the dysfunctional, wealthy Roy family fighting for control of a media empire.", answer: "What is *Succession*?", id: 'c5-400' },
                    { value: 600, clue: "The Disney+ show that introduced the world to the adorable, silent character Grogu (Baby Yoda).", answer: "What is *The Mandalorian*?", id: 'c5-600' },
                    { value: 800, clue: "The genre of documentary popularized by Netflix that often involves true crimes, conspiracies, and wild twists.", answer: "What is True Crime?", id: 'c5-800' },
                    { value: 1000, clue: "The South Korean series that broke Netflix records in 2021 by featuring contestants competing in deadly children's games.", answer: "What is *Squid Game*?", id: 'c5-1000' }
                ]
            },
            {
                category: "TikTok Tactics",
                clues: [
                    { value: 200, clue: "The abbreviation used to describe content that is entertaining and addictive, meaning 'for your page.'", answer: "What is FYP?", id: 'c6-200' },
                    { value: 400, clue: "The specific type of short video involving synchronized movement to a popular song clip.", answer: "What is a dance trend or dance challenge?", id: 'c6-400' },
                    { value: 600, clue: "The popular filter that gives you dramatically large, cartoonish eyes and mouth.", answer: "What is the 'Face Zoom' or 'Big Eyes' filter?", id: 'c6-600' },
                    { value: 800, clue: "The method of communicating an intense, often unspoken, reaction using only facial expressions and lip syncing to audio.", answer: "What is a 'Vibe Check'?", id: 'c6-800' },
                    { value: 1000, clue: "The internet slang term used to describe someone who is exceptionally skilled, flawless, or attractive, often related to celebrities.", answer: "What is 'Slay' or 'Iconic'?", id: 'c6-1000' }
                ]
            }
        ];

        // --- GAME STATE AND SCORING ---
        let currentView = 'title'; // 'title', 'board', 'modal', or 'reset_confirm'
        let currentClue = null;
        let scores = {
            '1': 0,
            '2': 0
        };

        // --- CORE VIEW MANAGEMENT ---
        function hideAllViews() {
            document.getElementById('title-view').classList.add('hidden');
            document.getElementById('board-view').classList.add('hidden');
            document.getElementById('scoreboard').classList.add('hidden');
            document.getElementById('clue-modal').classList.add('hidden');
            document.getElementById('clue-view').classList.add('hidden'); // Hide default clue view elements
            document.getElementById('answer-view').classList.add('hidden'); // Hide default answer view elements
            document.getElementById('reset-confirmation-view').classList.add('hidden'); // Hide reset confirmation elements
        }

        function setView(view) {
            hideAllViews(); // Hide everything first
            currentView = view;

            if (view === 'title') {
                document.getElementById('title-view').classList.remove('hidden');
                stopMusic(); // Stop music on title screen
            } else if (view === 'board') {
                document.getElementById('board-view').classList.remove('hidden');
                document.getElementById('scoreboard').classList.remove('hidden');
                stopMusic(); // Stop music on board view
                renderBoard(); // Re-render to reflect disabled clues
            } else if (view === 'clue_modal') { // Renamed from 'modal' to be more specific
                document.getElementById('clue-modal').classList.remove('hidden');
                document.getElementById('clue-view').classList.remove('hidden'); // Ensure clue view is shown
                startMusic(); // START music when clue is displayed
            } else if (view === 'answer_modal') {
                document.getElementById('clue-modal').classList.remove('hidden');
                document.getElementById('answer-view').classList.remove('hidden'); // Ensure answer view is shown
                stopMusic(); // STOP music when answer is revealed
            } else if (view === 'reset_confirm') {
                document.getElementById('clue-modal').classList.remove('hidden');
                document.getElementById('reset-confirmation-view').classList.remove('hidden');
                stopMusic(); // Stop music during confirmation
            }
        }

        // --- SCORING FUNCTIONS ---
        function updateScore(team, amount) {
            scores[team] += amount;
            document.getElementById(`score-${team}`).textContent = scores[team];
        }

        function renderScores() {
            document.getElementById('score-1').textContent = scores['1'];
            document.getElementById('score-2').textContent = scores['2'];
        }

        // Function to trigger the reset confirmation modal
        function resetGameConfirmation() {
            setView('reset_confirm');
        }

        function performReset(confirmed) {
            if (confirmed) {
                // Clear scores
                scores = { '1': 0, '2': 0 };
                renderScores();

                // Clear all clue states in localStorage
                gameData.forEach(category => {
                    category.clues.forEach(clue => {
                        localStorage.removeItem(clue.id);
                    });
                });
            }
            // In either case (confirmed or canceled), return to the board view
            setView('board');
        }

        // --- BOARD RENDERING AND CLUE LOGIC ---

        function renderBoard() {
            const board = document.getElementById('jeopardy-board');
            board.innerHTML = '';

            // 1. Render Category Headers (first row)
            gameData.forEach(category => {
                const header = document.createElement('div');
                // Removed h-32/h-24 height limits to allow text to wrap on smaller screens without being cut off
                header.className = 'flex items-center justify-center p-2 sm:p-3 text-center text-white bg-jeopardy-blue font-bold text-base sm:text-lg rounded-lg jeopardy-title-font uppercase tracking-wider shadow-xl border-4 border-jeopardy-yellow leading-tight';
                header.textContent = category.category;
                board.appendChild(header);
            });

            // 2. Render Clue Cells (rows 2-6)
            const values = [200, 400, 600, 800, 1000];
            values.forEach(value => {
                gameData.forEach((category, catIndex) => {
                    const clue = category.clues.find(c => c.value === value);
                    const cell = document.createElement('div');
                    
                    const isDisabled = localStorage.getItem(clue.id) === 'disabled';

                    // Reduced vertical padding and used relative height (h-20/h-24) to keep cells tighter
                    let classList = 'clue-cell flex items-center justify-center h-20 sm:h-24 text-white font-extrabold text-3xl sm:text-5xl rounded-lg bg-jeopardy-blue transition duration-300';

                    if (isDisabled) {
                        classList += ' disabled';
                        cell.textContent = ''; // Clear text if disabled
                    } else {
                        cell.textContent = `$${value}`;
                        cell.addEventListener('click', () => openClue(clue)); // No need to pass cellElement directly now
                    }

                    cell.className = classList;
                    board.appendChild(cell);
                });
            });
        }

        // Function to open the clue modal
        function openClue(clue) {
            currentClue = clue;
            
            document.getElementById('modal-category').textContent = gameData.find(c => c.clues.includes(clue)).category;
            document.getElementById('modal-clue-value').textContent = `$${clue.value}`;
            document.getElementById('modal-clue').innerHTML = clue.clue;
            document.getElementById('modal-answer').textContent = clue.answer;

            setView('clue_modal'); // Show the clue first and start music
        }

        // Function to reveal the answer in the modal
        function revealAnswer() {
            // Mark the clue as disabled/used in localStorage before switching view
            if (currentClue) {
                localStorage.setItem(currentClue.id, 'disabled');
            }
            setView('answer_modal'); // Show the answer view and stop music
        }

        // Function to close the modal and update the board
        function closeModal() {
            currentClue = null;
            setView('board'); // Return to the board view and stop music
        }

        // Initialize the app
        window.onload = () => {
            renderScores();
            setView('title'); // Start on the title view
        };
    </script>
</body>
</html>
